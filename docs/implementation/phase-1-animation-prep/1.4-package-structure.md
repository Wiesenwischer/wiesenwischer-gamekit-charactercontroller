# 1.4 Animation Package Struktur

**Commit:** `feat(phase-1): 1.4 Animation Package Struktur`

---

## Ziel

Das Animation Package erstellen mit korrekter Ordnerstruktur, package.json und Assembly Definitions.

---

## Package-Struktur

```
Packages/
└── Wiesenwischer.GameKit.CharacterController.Animation/
    ├── package.json
    ├── README.md
    ├── CHANGELOG.md
    ├── Runtime/
    │   ├── Wiesenwischer.GameKit.CharacterController.Animation.Runtime.asmdef
    │   └── Core/
    │       ├── IAnimationController.cs
    │       └── AnimationParameters.cs
    ├── Editor/
    │   └── Wiesenwischer.GameKit.CharacterController.Animation.Editor.asmdef
    └── Resources/
        ├── AnimatorControllers/
        ├── AvatarMasks/
        └── AnimationClips/
```

---

## Schritt 1: Ordner erstellen

### Bash/PowerShell
```bash
mkdir -p "Packages/Wiesenwischer.GameKit.CharacterController.Animation/Runtime/Core"
mkdir -p "Packages/Wiesenwischer.GameKit.CharacterController.Animation/Editor"
mkdir -p "Packages/Wiesenwischer.GameKit.CharacterController.Animation/Resources/AnimatorControllers"
mkdir -p "Packages/Wiesenwischer.GameKit.CharacterController.Animation/Resources/AvatarMasks"
mkdir -p "Packages/Wiesenwischer.GameKit.CharacterController.Animation/Resources/AnimationClips"
```

### Oder in Unity
1. Project Fenster → Packages
2. Rechtsklick → Show in Explorer
3. Ordner manuell erstellen

---

## Schritt 2: package.json erstellen

**Datei:** `Packages/Wiesenwischer.GameKit.CharacterController.Animation/package.json`

```json
{
  "name": "wiesenwischer.gamekit.charactercontroller.animation",
  "displayName": "GameKit Character Controller - Animation",
  "version": "0.1.0",
  "unity": "2022.3",
  "description": "Animation system for GameKit Character Controller. Provides Animator setup, blend trees, and animation integration.",
  "keywords": [
    "animation",
    "animator",
    "character",
    "locomotion",
    "blend-tree"
  ],
  "author": {
    "name": "Wiesenwischer"
  },
  "dependencies": {
    "wiesenwischer.gamekit.charactercontroller.core": "0.1.0"
  }
}
```

---

## Schritt 3: Runtime Assembly Definition

**Datei:** `Packages/.../Runtime/Wiesenwischer.GameKit.CharacterController.Animation.Runtime.asmdef`

```json
{
    "name": "Wiesenwischer.GameKit.CharacterController.Animation.Runtime",
    "rootNamespace": "Wiesenwischer.GameKit.CharacterController.Animation",
    "references": [
        "Wiesenwischer.GameKit.CharacterController.Core.Runtime"
    ],
    "includePlatforms": [],
    "excludePlatforms": [],
    "allowUnsafeCode": false,
    "overrideReferences": false,
    "precompiledReferences": [],
    "autoReferenced": true,
    "defineConstraints": [],
    "versionDefines": [],
    "noEngineReferences": false
}
```

---

## Schritt 4: Editor Assembly Definition

**Datei:** `Packages/.../Editor/Wiesenwischer.GameKit.CharacterController.Animation.Editor.asmdef`

```json
{
    "name": "Wiesenwischer.GameKit.CharacterController.Animation.Editor",
    "rootNamespace": "Wiesenwischer.GameKit.CharacterController.Animation.Editor",
    "references": [
        "Wiesenwischer.GameKit.CharacterController.Animation.Runtime",
        "Wiesenwischer.GameKit.CharacterController.Core.Runtime"
    ],
    "includePlatforms": [
        "Editor"
    ],
    "excludePlatforms": [],
    "allowUnsafeCode": false,
    "overrideReferences": false,
    "precompiledReferences": [],
    "autoReferenced": true,
    "defineConstraints": [],
    "versionDefines": [],
    "noEngineReferences": false
}
```

---

## Schritt 5: Basis-Interfaces erstellen

### IAnimationController.cs

**Datei:** `Packages/.../Runtime/Core/IAnimationController.cs`

```csharp
namespace Wiesenwischer.GameKit.CharacterController.Animation
{
    /// <summary>
    /// Interface für Animation-Steuerung.
    /// Abstrahiert den Zugriff auf den Animator.
    /// </summary>
    public interface IAnimationController
    {
        /// <summary>
        /// Setzt die Bewegungsgeschwindigkeit (0 = Idle, 1 = Run, 1.5 = Sprint).
        /// </summary>
        void SetSpeed(float speed);

        /// <summary>
        /// Setzt den Grounded-Status.
        /// </summary>
        void SetGrounded(bool isGrounded);

        /// <summary>
        /// Setzt die vertikale Velocity für Jump/Fall Blending.
        /// </summary>
        void SetVerticalVelocity(float velocity);

        /// <summary>
        /// Triggert die Jump-Animation.
        /// </summary>
        void TriggerJump();

        /// <summary>
        /// Triggert die Land-Animation.
        /// </summary>
        void TriggerLand();

        /// <summary>
        /// Setzt das Gewicht des Ability-Layers (0-1).
        /// </summary>
        void SetAbilityLayerWeight(float weight);
    }
}
```

### AnimationParameters.cs

**Datei:** `Packages/.../Runtime/Core/AnimationParameters.cs`

```csharp
using UnityEngine;

namespace Wiesenwischer.GameKit.CharacterController.Animation
{
    /// <summary>
    /// Konstanten für Animator-Parameter.
    /// Verwendet Hash-IDs für bessere Performance.
    /// </summary>
    public static class AnimationParameters
    {
        // Parameter-Namen
        public const string SpeedParam = "Speed";
        public const string IsGroundedParam = "IsGrounded";
        public const string VerticalVelocityParam = "VerticalVelocity";
        public const string JumpTrigger = "Jump";
        public const string LandTrigger = "Land";

        // Hash-IDs (für Performance)
        public static readonly int SpeedHash = Animator.StringToHash(SpeedParam);
        public static readonly int IsGroundedHash = Animator.StringToHash(IsGroundedParam);
        public static readonly int VerticalVelocityHash = Animator.StringToHash(VerticalVelocityParam);
        public static readonly int JumpHash = Animator.StringToHash(JumpTrigger);
        public static readonly int LandHash = Animator.StringToHash(LandTrigger);

        // Layer-Indizes
        public const int BaseLayerIndex = 0;
        public const int AbilityLayerIndex = 1;
    }
}
```

---

## Schritt 6: README.md erstellen

**Datei:** `Packages/.../README.md`

```markdown
# GameKit Character Controller - Animation

Animation system for the GameKit Character Controller.

## Features

- Humanoid Animator Controller with Blend Trees
- Locomotion animations (Idle, Walk, Run, Sprint)
- Airborne animations (Jump, Fall, Land)
- Layer-based ability animations
- Avatar Masks for upper/lower body separation

## Dependencies

- `wiesenwischer.gamekit.charactercontroller.core`

## Usage

1. Add `CharacterAnimator` component to your character
2. Assign the provided Animator Controller
3. The animation system integrates automatically with the State Machine
```

---

## Verifikation

### In Unity prüfen:
- [ ] Package erscheint im Package Manager (In Project)
- [ ] Keine Compiler-Fehler
- [ ] Assembly References funktionieren

### Dateien prüfen:
- [ ] package.json vorhanden
- [ ] Beide .asmdef Dateien vorhanden
- [ ] IAnimationController.cs kompiliert
- [ ] AnimationParameters.cs kompiliert

---

## Dateien nach diesem Schritt

```
Packages/
└── Wiesenwischer.GameKit.CharacterController.Animation/
    ├── package.json
    ├── README.md
    ├── Runtime/
    │   ├── Wiesenwischer.GameKit.CharacterController.Animation.Runtime.asmdef
    │   └── Core/
    │       ├── IAnimationController.cs
    │       └── AnimationParameters.cs
    ├── Editor/
    │   └── Wiesenwischer.GameKit.CharacterController.Animation.Editor.asmdef
    └── Resources/
        ├── AnimatorControllers/
        ├── AvatarMasks/
        └── AnimationClips/
```

---

## Phase 1 abgeschlossen!

Alle Vorbereitungen für die Animation sind abgeschlossen.

**Nächste Phase:** [Phase 2: Animator Setup](../phase-2-animator-setup/README.md)
